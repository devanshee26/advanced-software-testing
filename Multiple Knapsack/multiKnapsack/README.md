# Setting up and Running the Project

## Directory Contents
- pom.xml - The Maven configuration
- src - Directory containing the utilized Java code, including the test suites and the multiple knapsack solution implementation
- Additional files will be generated by Eclipse and Maven when running the experiments, the important are enumerated later when the experiments are described

## Installation
For the following installation steps, the experiments were originally run in Windows 10. Thus the installation steps are geared towards that OS, alternative setup may be required for other operating systems.

### Java
This project requires Java 8 version 1.8.0_191.
See here for installation instructions: https://docs.oracle.com/javase/8/docs/technotes/guides/install/windows_jdk_install.html#CHDEBCCJ

### Maven
This project uses Maven to run the tests. Specifically, Maven version 3.6.3 was used.
It turns out that version 3.6.3 is no longer officially available for download. 
Instead, use Maven version 3.9.6, following the installation instructions here: https://maven.apache.org/index.html (See the Download, Install, Configure, and Run links on that page)

Once Maven is installed, run `mvn -v` from the terminal, and ensure that it displays the correct version of Maven, and the correct version of Java (1.8.0_191).

### Eclipse IDE
The EclEmma plugin for Eclipse was used for code coverage analysis, thus the Eclipse IDE is required for the experiment.
Eclipse 2019-3 was used, however this version is no longer available.
A more recent version should suffice however, which can be downloaded here: https://eclipseide.org/ (If you would prefer an older version closer to the version utilized for the experiments, select the "Other Packages" button on that page)

EclEmma was included by default in the installation used for the experiments. To confirm this is the case, within the Eclipse IDE, select the `Help` dropdown, and select `About Eclipse IDE`. Then select `Installation Details` in the pop up.
The `Installed Software` tab will have a list of all the Eclipse components in this version. You can manually scroll through it or filter at the top for "EclEmma".
The experiments used EclEmma version 3.1.2.201903112331

If EclEmma is not installed, it can be installed through the Eclipse Marketplace.
Within the Eclipse IDE, select the `Help` dropdown, and select `Eclipse Market Place...`. 
In the `Search` tab, search for "EclEmma".
Install the "EclEmma Java Code Coverage" item.

## Running the Experiments
At this point, it is important to note tht there are two sets of four test suites (differentiated by one set having file/class names ending with "Mutation"). The Mutation Testing tool requires all the tests to be passing, which is not the case (as described in the report). The test classes ending with Mutation have their oracles modified to account for known faults/discrepencies in the implementation. 


### Executing Tests
1. In the terminal, navigate to the directory which contains the previously described pom.xml and src directory (should be the same location as this README)
2. Run `mvn clean test`
3. Maven will run all of the tests (specifically, the tests in the test classes which do not contain "Mutation" in the name), and output the results to the console

### Code Coverage
1. Open Eclipse
2. Select the `File` dropdown, then select `Import...`
3. In the pop, expand the `Maven`, select `Existing Maven Projects`, and hit `Next`
4. Using the `Browse` option, select the directory which contains the previously described pom.xml and src directory (should be the same location as this README), ensure the `pom.xml` file is selected, and then hit `Finish`
5. The `multiKnapsack` project should now be listed in the Eclipse Package Explorer.
6. Expand the project, then expand the `src/test/java` entry, then expand the `sysc5105.multiKnapsack` package
7. All the test files will be listed now
8. Right click on one of the test files (The experiments described in the paper used the files not containing "Mutation" in the name)
9. Select `Coverage As...` and then select `JUnit Test`
10. A `Coverage` tab should be opened, displaying the results (statement coverage by default), which can be exploded at your leisure. The report only reports coverage on files in the `src/main/java` directory (i.e. not including coverage of the test classes), which can be viewed in this way
11. At the very top right of this `Coverage` tab, there is an arrow for a drop down
12. This drop down contains options to view different types of coverage, as well as export the results as HTML

### Mutation Testing
Note that these experiments use the test suites ending with "Mutation".
1. In the terminal, navigate to the directory which contains the previously described pom.xml and src directory (should be the same location as this README)
2. To run mutation testin on all the test suites at once, run `mvn test-compile org.pitest:pitest-maven:mutationCoverage`
3. To run mutation testing on a specific test suite, run `mvn test-compile org.pitest:pitest-maven:mutationCoverage -P <profile>` replacing '<profile\>' with one of `baseBlock`, `eachBlock`, `pairwise`, or `metamorphic` which corresponds to the test suite you would like to run.
4. The results will be printed to the console, and an HTML output file can be found in the `target/pit-reports` directory (the `target` directory will be created in the same directory as the pom.xml file)


## Acknowledgements
The multiple knapsack solution implementation was built by Kemal Kojic, retrieved from here: https://github.com/kemaldev/Multiple-Knapsack-Problem